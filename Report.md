# Домашнее задание №9 (Тема "Резервное копирование и восстановление")

Описание/Пошаговая инструкция выполнения домашнего задания:

* Создаем ВМ/докер c ПГ.
  > <img src="pic/1.JPG" align="center" />
* Создаем БД, схему и в ней таблицу.
  
  <br>__*Создаю базу данных "testdb":*__
  > <img src="pic/2_1.JPG" align="center" />
  <br>__*В созданной базе данных создаю схему "schTest":*__
  > <img src="pic/2_2.JPG" align="center" />
  <br>__*И уже в созданной схеме "schTest" создаю таблицу "test":*__
  > <img src="pic/3.JPG" align="center" />

* Заполним таблицы автосгенерированными 100 записями.
  > <img src="pic/2_3.JPG" align="center" />
  
* Под линукс пользователем Postgres создадим каталог для бэкапов
  
  <br>__*С помощью рут-пользователя командой «mkdir /home/postgres» я создаю каталог /home/postgres, далее командой «chown postgres /home/postgres» устанавливаю владельцем пользователя postgres этому каталогу. Теперь уже под пользователем postgres там можно создать каталог для бэкапов.*__
  > <img src="pic/4.JPG" align="center" />
* Сделаем логический бэкап используя утилиту COPY
  
  <br>__*Создаю логический бэкап таблицы "test" с именем "st.sql":*__ 
  > <img src="pic/5_1.JPG" align="center" />
  <br>__*Убеждаюсь, что файл бэкапа создался в нашем каталоге:*__  
  > <img src="pic/5_2.JPG" align="center" />
* Восстановим в 2 таблицу данные из бэкапа.
  
  <br>__*Для того, чтобы восстановить данные из бэкапа, вторая таблица "test_copy" должна быть в той же схеме "schTest", как и оригинальная таблица. По этому я создаю таблицу в той же схеме. Команда "\copy ... from ..." выполняется успешно, и таблица "test_copy" теперь с такими же данными, что и таблица "test".*__
  > <img src="pic/6.JPG" align="center" />
* Используя утилиту pg_dump, создадим бэкап в кастомном сжатом формате двух таблиц
* Используя утилиту pg_restore, восстановим в новую БД только вторую таблицу!
  
